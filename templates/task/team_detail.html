{% extends "base.html" %}

{% block content %}
  <h2>Team: {{ team.name }}</h2>

  <div class="mb-3">
{#    <a href="{% url 'task:team-delete' pk=team.id %}" class="btn btn-danger">Delete Team</a>#}
{#    <a href="{% url 'task:team-update' pk=team.id %}" class="btn btn-secondary">Update Team</a>#}
  </div>

  <hr>

  <h4>Members ({{ team.workers.count }})</h4>
  <ul>
    {% for worker in team.workers.all %}
      <li>
        <strong>{{ worker.first_name }} {{ worker.last_name }}</strong>
        ({{ worker.position }})
        —
        <a href="{% url 'task:worker-detail' pk=worker.id %}">View profile</a>
      </li>
    {% empty %}
      <li class="text-muted">No workers in this team.</li>
    {% endfor %}
  </ul>

  <hr>

  <h4>Tasks by team members</h4>
  {% for worker in team.workers.all %}
    <h5>{{ worker.first_name }} {{ worker.last_name }}</h5>
    <ul>
      {% for task in worker.assigned_tasks.all %}
        <li>
          <strong>{{ task.name }}</strong>
          {% if task.is_completed %}
            <span class="badge badge-success">Completed</span>
          {% else %}
            <span class="badge badge-warning">Incomplete</span>
          {% endif %}
          — Deadline: {{ task.deadline|date:"Y-m-d H:i" }}
        </li>
      {% empty %}
        <li class="text-muted">No tasks assigned.</li>
      {% endfor %}
    </ul>
  {% empty %}
    <p class="text-muted">No workers — no tasks.</p>
  {% endfor %}

{% endblock %}
